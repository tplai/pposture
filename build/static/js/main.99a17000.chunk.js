(this["webpackJsonppposture-react"]=this["webpackJsonppposture-react"]||[]).push([[0],{203:function(t,e,i){},292:function(t,e,i){},298:function(t,e){},299:function(t,e){},307:function(t,e){},315:function(t,e,i){"use strict";i.r(e);var a=i(38),r=i(14),s=i.n(r),n=i(83),o=i.n(n),c=(i(203),i(11)),h=i.n(c),l=i(63),u=i(10),d=i(17),g=i(73),p=i(45),A=i(44),b=i(15),j=i.p+"static/media/PicExample.387e8925.png",f=i(242),m=i.n(f),v=i(202),y=i(201),k=i(199),x=i(243),O=i.n(x),S=(i(292),i(293),i(314));i(313);var I=[2,4,6,8,10,12,14,16],C=[1,3,5,7,9,11,13,15],M={5:[3,7,11],6:[4,8,12],7:[9],8:[10],11:[13],12:[14],13:[15],14:[16]},P={ear:{},shoulder:{},hip:{},knee:{}};function R(t,e,i,a){return Math.abs(180*(Math.atan2(e,t)-Math.atan2(a,i))/Math.PI)}function T(){return(T=Object(b.a)(h.a.mark((function t(e){var i,a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S.load();case 2:return i=t.sent,t.next=5,i.estimateSinglePose(e,{flipHorizontal:!1});case 5:return a=t.sent,t.abrupt("return",a);case 7:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Y=function(t){Object(p.a)(i,t);var e=Object(A.a)(i);function i(t){var a;return Object(u.a)(this,i),(a=e.call(this,t)).state={displayHomepage:!0,loading:!1,imgWidth:-1,imgHeight:-1,picture:-1,isValidImg:!0,isRightSide:!1,score:"",avgPosture:"",headTilt:"",backTilt:"",hipCordinates:[],kneeCordinates:[],shoulderCoordinates:[],earCoordinates:[]},a.imgref=s.a.createRef(),a.canvasref=s.a.createRef(),a.clearPage=a.clearPage.bind(Object(g.a)(a)),a.onDrop=a.onDrop.bind(Object(g.a)(a)),a.analyzePosture=a.analyzePosture.bind(Object(g.a)(a)),a.verifyImageQualityAndSide=a.verifyImageQualityAndSide.bind(Object(g.a)(a)),a.displayImageError=a.displayImageError.bind(Object(g.a)(a)),a.assignCorrespondingSideCoordinates=a.assignCorrespondingSideCoordinates.bind(Object(g.a)(a)),a.getPostureInsights=a.getPostureInsights.bind(Object(g.a)(a)),a.displayHomepage=a.displayHomepage.bind(Object(g.a)(a)),a}return Object(d.a)(i,[{key:"onDrop",value:function(t){var e=this,i=new FileReader;i.onload=function(t){e.setState((function(e){return Object(l.a)(Object(l.a)({},e),{},{picture:t.target.result})}))},i.readAsDataURL(t[0]),this.analyzePosture()}},{key:"analyzePosture",value:function(){var t=this;this.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{loading:!0,displayHomepage:!1})})),this.clearPage(),function(t){return T.apply(this,arguments)}(this.imgref.current).then((function(e){var i=e.keypoints;t.verifyImageQualityAndSide(i)?(t.assignBodyCoordinates(i),t.drawCanvas(i),t.getPostureInsights()):t.displayImageError()}))}},{key:"assignBodyCoordinates",value:function(t){for(var e=0;e<t.length;e++){var i=t[e],a={};a.x=i.position.x,a.y=i.position.y,"leftEar"===i.part?P.ear.left=a:"rightEar"===i.part?P.ear.right=a:"leftShoulder"===i.part?P.shoulder.left=a:"rightShoulder"===i.part?P.shoulder.right=a:"leftHip"===i.part?P.hip.left=a:"rightHip"===i.part?P.hip.right=a:"leftKnee"===i.part?P.knee.left=a:"rightKnee"===i.part&&(P.knee.right=a)}}},{key:"drawCanvas",value:function(t){var e=this,i=600/this.imgref.current.naturalHeight,a=i;this.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{loading:!1,isValidImg:!0,imgWidth:Math.round(e.imgref.current.naturalWidth*a),imgHeight:Math.round(e.imgref.current.naturalHeight*i)})}));var r=this.state.rightSide,s=this.canvasref.current.getContext("2d"),n=(s.canvas.width-this.state.imgWidth)/2,o=(s.canvas.height-this.state.imgHeight)/2;s.drawImage(this.imgref.current,n,o,this.state.imgWidth,this.state.imgHeight);for(var c=0;c<t.length;c++){var h=t[c];if((!r&&C.includes(c)||r&&I.includes(c))&&(s.fillStyle="#00FFFF",s.beginPath(),s.arc(h.position.x*a,h.position.y*i,4,0,2*Math.PI,!0),s.fill(),c in M))for(var u in M[c])s.beginPath(),s.moveTo(h.position.x*a,h.position.y*i),s.lineTo(t[M[c][u]].position.x*a,t[M[c][u]].position.y*i),s.lineWidth=3,s.strokeStyle="#00FFFF",s.stroke()}}},{key:"verifyImageQualityAndSide",value:function(t){for(var e=0,i=0,a=0;a<t.length;++a){var r=t[a];I.includes(a)?e+=r.score:C.includes(a)&&(i+=r.score)}var s=i/C.length,n=e/I.length,o=!0,c=!0;return Math.abs(s-n)<=.2&&(o=!1),n<s&&(c=!1),this.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{rightSide:c,isValidImg:o})})),o}},{key:"displayHomepage",value:function(){this.setState({displayHomepage:!0}),this.clearPage()}},{key:"clearPage",value:function(){this.setState({isValidImg:!0,avgPosture:"",score:"",headTilt:"",backTilt:"",imgHeight:0,imgWidth:0})}},{key:"displayImageError",value:function(){this.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{loading:!1,imgHeight:0,imgWidth:0})}))}},{key:"assignCorrespondingSideCoordinates",value:function(){var t=[],e=[],i=[],a=[];this.state.isRightSide?(t.push(P.hip.right.x),t.push(P.hip.right.y),e.push(P.knee.right.x),e.push(P.knee.right.y),i.push(P.shoulder.right.x),i.push(P.shoulder.right.y),a.push(P.ear.right.x),a.push(P.ear.right.y)):(t.push(P.hip.left.x),t.push(P.hip.left.y),e.push(P.knee.left.x),e.push(P.knee.left.y),i.push(P.shoulder.left.x),i.push(P.shoulder.left.y),a.push(P.ear.left.x),a.push(P.ear.left.y)),this.setState((function(r){return Object(l.a)(Object(l.a)({},r),{},{hipCordinates:t,kneeCordinates:e,shoulderCoordinates:i,earCoordinates:a})}))}},{key:"getPostureInsights",value:function(){this.assignCorrespondingSideCoordinates();var t=R(this.state.shoulderCoordinates[0]-this.state.hipCordinates[0],this.state.hipCordinates[1]-this.state.shoulderCoordinates[1],0,1),e=R(this.state.earCoordinates[0]-this.state.shoulderCoordinates[0],this.state.shoulderCoordinates[1]-this.state.earCoordinates[1],0,1),i=Math.abs(0-t),a=Math.abs(0-e),r=function(t,e){var i=10-(t/4*.75+e/4*.25);return i<0?0:i}(i,a),s=Math.round(i/4),n=Math.round(a/4),o="",c="",h="";r>=0&&r<5?o="Poor Posture":r>=5&&r<8?o="Fair Posture":r>=8&&r<=10&&(o="Great Posture"),s>=0&&s<2?c="Back Straightness: Your back is straight!":s>=2&&s<4?c="Back Straightness: Your back is slightly tilted - try aligning it upright":s>=4&&(c="Back Straightness: Your back is very curved - try aligning it upright"),n>=0&&n<4?h="Neck Position: Your neck is positioned well!":n>=4&&n<8?h="Neck Position: Your neck is slightly in front of your body - try aligning it above your shoulders":n>=8&&(h="Neck Position: Your neck is too far in front of your body - try aligning it above your shoulders"),this.setState((function(t){return Object(l.a)(Object(l.a)({},t),{},{score:Math.round(r)+"/10",avgPosture:o,backTilt:c,headTilt:h})}))}},{key:"render",value:function(){var t=this.state,e=t.displayHomepage,i=t.loading,r=t.picture,s=t.imgWidth,n=t.imgHeight,o=t.isValidImg,c=t.avgPosture,h=t.score,l=t.headTilt,u=t.backTilt;return Object(a.jsxs)("div",{className:"App",children:[Object(a.jsxs)(y.a,{bg:"dark",variant:"dark",children:[Object(a.jsxs)(y.a.Brand,{href:"#home",onClick:this.displayHomepage,children:[Object(a.jsx)("img",{alt:"",src:"data:image/png;base64,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",width:"30",height:"30",className:"d-inline-block align-top"})," ","Perfect Posture"," "]}),Object(a.jsx)(v.a,{className:"mr-auto"}),Object(a.jsx)(v.a,{children:Object(a.jsxs)(k.a,{className:"popup-content",trigger:Object(a.jsx)("button",{size:"sm",align:"right",children:"About Us"}),position:"bottom right",children:[Object(a.jsx)("h5",{children:" Our Model"}),Object(a.jsx)("p",{children:"We use computer vision to analyze an image of your posture. Some of the metrics that go into our analysis include examing your back, neck, and shoulder positionings. We do not store your images."})]})})]}),Object(a.jsx)("div",{className:"body",children:Object(a.jsxs)("div",{className:"upload",children:[Object(a.jsx)(m.a,{withIcon:!0,singleImage:!0,onChange:this.onDrop,imgExtension:[".jpg",".jpeg",".png"],maxFileSize:5242880}),e?Object(a.jsxs)("div",{className:"homepage-info",children:[Object(a.jsx)("span",{children:"Welcome to Perfect Posture! To get the best analysis, submit a seated side view picture with as little obstruction as possible. Relax and show us your natural pose!"}),Object(a.jsx)("div",{className:"space"}),Object(a.jsx)("p",{children:"Follow the example below for best results."}),Object(a.jsx)("img",{alt:"",src:j,width:"240",height:"352",className:"d-inline-block align-top"})]}):null,Object(a.jsx)("img",{src:r,alt:"upload",style:{display:"none",height:600,width:"auto"},ref:this.imgref}),Object(a.jsx)("canvas",{width:s,height:n,ref:this.canvasref}),i?Object(a.jsx)(O.a,{className:"loader-pos",type:"TailSpin",color:"#00BFFF",height:160,width:160}):null,o?Object(a.jsxs)("div",{className:"insights-text",children:[Object(a.jsx)("div",{children:Object(a.jsx)("b",{children:c})}),Object(a.jsx)("div",{children:Object(a.jsx)("b",{children:h})}),Object(a.jsxs)("div",{children:[l," "]}),Object(a.jsxs)("div",{children:[u," "]})]}):Object(a.jsx)("div",{children:"Cannot estimate your posture from this image, try takin a better side view picture and make sure the view is not obstructed"})]})})]})}}]),i}(s.a.Component),w=function(t){t&&t instanceof Function&&i.e(3).then(i.bind(null,318)).then((function(e){var i=e.getCLS,a=e.getFID,r=e.getFCP,s=e.getLCP,n=e.getTTFB;i(t),a(t),r(t),s(t),n(t)}))};o.a.render(Object(a.jsx)(s.a.StrictMode,{children:Object(a.jsx)(Y,{})}),document.getElementById("root")),w()}},[[315,1,2]]]);
//# sourceMappingURL=main.99a17000.chunk.js.map