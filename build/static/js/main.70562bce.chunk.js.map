{"version":3,"sources":["PicExample.png","App.js","logo.png","reportWebVitals.js","index.js"],"names":["posenet","require","rightside","leftside","keypointlines","5","6","7","8","11","12","13","14","bodyCoordinates","ear","shoulder","hip","knee","getVerticalAngle","xVec","yVec","xAxisVec","yAxisVec","Math","abs","atan2","PI","imageElement","a","load","net","estimateSinglePose","flipHorizontal","pose","App","props","state","displayHomepage","loading","imgWidth","imgHeight","picture","isValidImg","isRightSide","score","avgPosture","headTilt","backTilt","hipCordinates","kneeCordinates","shoulderCoordinates","earCoordinates","imgref","React","createRef","canvasref","clearPage","bind","onDrop","analyzePosture","verifyImageQualityAndSide","displayImageError","assignCorrespondingSideCoordinates","getPostureInsights","reader","FileReader","onload","e","setState","prevState","target","result","readAsDataURL","this","estimatePoseOnImage","current","then","res","keypoints","assignBodyCoordinates","drawCanvas","i","length","keypoint","bodyPart","x","position","y","part","left","right","yScale","naturalHeight","xScale","round","naturalWidth","rightSide","ctx","getContext","canvas","width","height","drawImage","includes","fillStyle","beginPath","arc","fill","con","moveTo","lineTo","lineWidth","strokeStyle","stroke","rightScore","leftScore","leftSideConfidenceAvg","rightSideConfidenceAvg","valid","hipCoords","kneeCoords","shoulderCoords","earCoords","push","hipShoulderAngle","shoulderEarAngle","shoulderAngleDeviation","earAngleDeviation","postureScore","shoulderDeviation","earDeviation","getPostureScore","backScore","neckScore","postureStr","backStr","headStr","className","Navbar","bg","variant","Brand","href","onClick","alt","src","Nav","trigger","size","align","withIcon","singleImage","onChange","imgExtension","maxFileSize","examplePic","style","display","ref","type","color","Component","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.70562bce.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/PicExample.387e8925.png\";","import logo from './logo.png';\nimport examplePic from './PicExample.png';\nimport React from 'react';\nimport ImageUploader from \"react-images-upload\";\nimport Nav from 'react-bootstrap/Nav';\nimport Navbar from 'react-bootstrap/Navbar';\nimport Popup from 'reactjs-popup';\nimport Loader from 'react-loader-spinner'\nimport 'reactjs-popup';\nimport './index.css';\nimport './App.css';\nimport 'bootstrap/dist/css/bootstrap.min.css';\n\nconst posenet = require('@tensorflow-models/posenet');\nrequire('@tensorflow/tfjs-backend-webgl');\n\nconst scaledHeight = 600;\n\n// minimum difference between avg confidence scores between sides\nconst differenceMin = .2;\n\n// 4 angles of deviation counts as 1 point less.\nconst angleWeightFactor = 4.0;\n\n// weight for scoring\nconst hipShoulderWeight = .75;\nconst shoulderEarWeight = .25;\n\n// ideal angles\nconst expectedShoulderAngle = 0;\nconst expectedEarAngle = 0;\n\nconst rightside = [2, 4, 6, 8, 10, 12, 14, 16];\nconst leftside = [1, 3, 5, 7, 9, 11, 13, 15];\n\n// dictionary for lines\nconst keypointlines = {\n  5: [3, 7, 11],   // left shoulder to left elbow, left hip\n  6: [4, 8, 12],   // right shoulder to right elbow, right hip\n  7: [9],          // left elbow to left wrist\n  8: [10],         // right eblow to right wrist\n  11: [13],        // left hip to  left knee\n  12: [14],        // right hip to right knee\n  13: [15],        // left knee to left ankle\n  14: [16],        // right knee to right ankle\n};\n\nconst bodyCoordinates = {\n  ear: {}, // Left, Right\n  shoulder: {},\n  hip: {},\n  knee: {}\n};\n\nfunction getPostureScore(shoulderDeviation, earDeviation) {\n  let shoulderScoreOffset = hipShoulderWeight * (shoulderDeviation / angleWeightFactor);\n  let earScoreOffset = shoulderEarWeight * (earDeviation / angleWeightFactor);\n  let score =  (10.0 - (shoulderScoreOffset + earScoreOffset)); // Score out of 10.\n  return score < 0 ? 0 : score;\n}\n\n// xAxis 0, yAxis arbitrary 1 value just to go straight up\nfunction getVerticalAngle(xVec, yVec, xAxisVec, yAxisVec) {\n  return Math.abs((Math.atan2(yVec, xVec) - Math.atan2(yAxisVec, xAxisVec)) * 180 / Math.PI);\n}\n\nasync function estimatePoseOnImage(imageElement) {\n  // load the posenet model from a checkpoint\n  const net = await posenet.load();\n\n  const pose = await net.estimateSinglePose(imageElement, {\n    flipHorizontal: false\n  });\n  return pose;\n}\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      displayHomepage: true,\n      loading: false,\n      imgWidth: -1,\n      imgHeight: -1,\n      picture: -1,\n      isValidImg: true,\n      isRightSide: false,\n      score: \"\",\n      avgPosture: \"\",\n      headTilt: \"\",\n      backTilt: \"\",\n      // Main parts coordinates.\n      hipCordinates: [],\n      kneeCordinates: [],\n      shoulderCoordinates: [],\n      earCoordinates: []\n    };\n    this.imgref = React.createRef();\n    this.canvasref = React.createRef();\n\n    this.clearPage = this.clearPage.bind(this);\n    this.onDrop = this.onDrop.bind(this);\n    this.analyzePosture = this.analyzePosture.bind(this);\n    this.verifyImageQualityAndSide = this.verifyImageQualityAndSide.bind(this);\n    this.displayImageError = this.displayImageError.bind(this);\n    this.assignCorrespondingSideCoordinates = this.assignCorrespondingSideCoordinates.bind(this);\n    this.getPostureInsights = this.getPostureInsights.bind(this);\n    this.displayHomepage = this.displayHomepage.bind(this);\n  }\n\n  onDrop(picture) {\n    let reader = new FileReader();\n    reader.onload = (e) => {\n      this.setState(prevState => ({\n        ...prevState,\n        picture: e.target.result\n        })\n      );\n    }\n    reader.readAsDataURL(picture[0]);\n    this.analyzePosture();\n  };\n\n  analyzePosture() {\n    // begin pose estimation\n    this.setState(prevState => ({\n      ...prevState,\n      loading: true,\n      displayHomepage: false,\n      })\n    );\n    this.clearPage();\n    const pose = estimatePoseOnImage(this.imgref.current);\n    pose.then((res) => {\n      let keypoints = res.keypoints;\n\n      if (!this.verifyImageQualityAndSide(keypoints)) {\n        this.displayImageError();\n        return;\n      }\n      this.assignBodyCoordinates(keypoints);\n      this.drawCanvas(keypoints);\n      this.getPostureInsights();\n    })\n  }\n\n  assignBodyCoordinates(keypoints) {\n    // Loop through keypoints\n    for (let i = 0; i < keypoints.length; i++) {\n      let keypoint = keypoints[i];\n      let bodyPart = {};\n      bodyPart.x = keypoint.position.x;\n      bodyPart.y = keypoint.position.y;\n      if (keypoint.part === \"leftEar\") {\n        bodyCoordinates.ear.left = bodyPart;\n      } else if (keypoint.part === \"rightEar\") {\n        bodyCoordinates.ear.right = bodyPart;\n      } else if (keypoint.part === \"leftShoulder\") {\n        bodyCoordinates.shoulder.left = bodyPart;\n      } else if (keypoint.part === \"rightShoulder\") {\n        bodyCoordinates.shoulder.right = bodyPart;\n      } else if (keypoint.part === \"leftHip\") {\n        bodyCoordinates.hip.left = bodyPart;\n      } else if (keypoint.part === \"rightHip\") {\n        bodyCoordinates.hip.right = bodyPart;\n      } else if (keypoint.part === \"leftKnee\") {\n        bodyCoordinates.knee.left = bodyPart;\n      } else if (keypoint.part === \"rightKnee\") {\n        bodyCoordinates.knee.right = bodyPart;\n      }\n    }\n  }\n\n  drawCanvas(keypoints) {\n    let yScale = 1.0 * scaledHeight /  this.imgref.current.naturalHeight;\n    let xScale = yScale;\n\n    this.setState(prevState => ({\n      ...prevState,\n      loading: false,\n      isValidImg: true,\n      imgWidth: Math.round(this.imgref.current.naturalWidth * xScale),\n      imgHeight: Math.round(this.imgref.current.naturalHeight * yScale),\n      })\n    );\n\n    let rightSide = this.state.rightSide;\n\n    let ctx = this.canvasref.current.getContext('2d');\n    let x = (ctx.canvas.width - (this.state.imgWidth) ) / 2; // centre x\n    let y = (ctx.canvas.height - (this.state.imgHeight) ) / 2; // centre y\n    ctx.drawImage(this.imgref.current, x, y, this.state.imgWidth, this.state.imgHeight); // draw scaled img onto the canvas.\n    for (let i = 0; i < keypoints.length; i++) { // loop through keypoints\n      let keypoint = keypoints[i]; // A keypoint is an object describing a body part (like rightArm or leftShoulder)\n\n      if ((!rightSide && leftside.includes(i)) || (rightSide && rightside.includes(i))) {\n        // point\n        ctx.fillStyle = \"#00FFFF\";\n        ctx.beginPath();\n        ctx.arc(keypoint.position.x * xScale, keypoint.position.y * yScale, 4, 0, 2 * Math.PI, true);\n        ctx.fill();\n\n        // lines\n        if (i in keypointlines) {\n          for (let con in keypointlines[i]) {\n           ctx.beginPath();\n           ctx.moveTo(keypoint.position.x * xScale, keypoint.position.y * yScale);\n           ctx.lineTo(keypoints[keypointlines[i][con]].position.x * xScale, keypoints[keypointlines[i][con]].position.y * yScale);\n\n           ctx.lineWidth = 3;\n           ctx.strokeStyle = \"#00FFFF\";\n           ctx.stroke();\n          }\n        }\n      }\n    }\n  }\n\n  verifyImageQualityAndSide(keypoints) {\n    let rightScore = 0;\n    let leftScore = 0;\n\n    for (let i = 0; i < keypoints.length; ++i) {\n      let keypoint = keypoints[i];\n      // compute average left or right side\n      if (rightside.includes(i)) {\n        rightScore += keypoint.score;\n      }\n      else if (leftside.includes(i)) {\n        leftScore += keypoint.score;\n      }\n    }\n    let leftSideConfidenceAvg = leftScore / leftside.length;\n    let rightSideConfidenceAvg = rightScore / rightside.length;\n\n    let valid = true;\n    let rightSide = true;\n    if (Math.abs(leftSideConfidenceAvg - rightSideConfidenceAvg) <= differenceMin) {\n      valid = false;\n    }\n    if (rightSideConfidenceAvg < leftSideConfidenceAvg) {\n      rightSide = false;\n    }\n    this.setState(prevState => ({\n      ...prevState,\n      rightSide: rightSide,\n      isValidImg: valid\n      })\n    );\n    return valid;\n  }\n\n  displayHomepage() {\n    this.setState({\n      displayHomepage: true,\n    });\n    this.clearPage();\n  }\n\n  clearPage() {\n    this.setState({\n      isValidImg: true,\n      avgPosture: \"\",\n      score: \"\",\n      headTilt: \"\",\n      backTilt: \"\",\n      imgHeight: 0,\n      imgWidth: 0,\n    });\n  }\n\n  displayImageError() {\n    this.setState(prevState => ({\n      ...prevState,\n      loading: false,\n      imgHeight: 0,\n      imgWidth: 0,\n      })\n    );\n  }\n\n  assignCorrespondingSideCoordinates() {\n    let hipCoords = [];\n    let kneeCoords = [];\n    let shoulderCoords = [];\n    let earCoords = [];\n    if (this.state.isRightSide) {\n      hipCoords.push(bodyCoordinates.hip.right.x);\n      hipCoords.push(bodyCoordinates.hip.right.y);\n      kneeCoords.push(bodyCoordinates.knee.right.x);\n      kneeCoords.push(bodyCoordinates.knee.right.y);\n      shoulderCoords.push(bodyCoordinates.shoulder.right.x);\n      shoulderCoords.push(bodyCoordinates.shoulder.right.y);\n      earCoords.push(bodyCoordinates.ear.right.x);\n      earCoords.push(bodyCoordinates.ear.right.y);\n    } else { // Left side parts.\n      hipCoords.push(bodyCoordinates.hip.left.x);\n      hipCoords.push(bodyCoordinates.hip.left.y);\n      kneeCoords.push(bodyCoordinates.knee.left.x);\n      kneeCoords.push(bodyCoordinates.knee.left.y);\n      shoulderCoords.push(bodyCoordinates.shoulder.left.x);\n      shoulderCoords.push(bodyCoordinates.shoulder.left.y);\n      earCoords.push(bodyCoordinates.ear.left.x);\n      earCoords.push(bodyCoordinates.ear.left.y);\n    }\n    this.setState(prevState => ({\n      ...prevState,\n      hipCordinates: hipCoords,\n      kneeCordinates: kneeCoords,\n      shoulderCoordinates: shoulderCoords,\n      earCoordinates: earCoords\n      })\n    );\n  }\n\n  getPostureInsights() {\n    this.assignCorrespondingSideCoordinates();\n    let xShoulderVec = this.state.shoulderCoordinates[0] - this.state.hipCordinates[0];\n    let yShoulderVec = this.state.hipCordinates[1] - this.state.shoulderCoordinates[1];\n    let hipShoulderAngle = getVerticalAngle(xShoulderVec, yShoulderVec, 0, 1);\n\n\n    let xEarVec = this.state.earCoordinates[0] - this.state.shoulderCoordinates[0];\n    let yEarVec = this.state.shoulderCoordinates[1] - this.state.earCoordinates[1];\n    let shoulderEarAngle = getVerticalAngle(xEarVec, yEarVec, 0, 1);\n\n    let shoulderAngleDeviation = Math.abs(expectedShoulderAngle - hipShoulderAngle);\n    let earAngleDeviation = Math.abs(expectedEarAngle - shoulderEarAngle);\n\n    // Evaluating perfect posture score.\n    let postureScore = getPostureScore(shoulderAngleDeviation, earAngleDeviation);\n    let backScore = Math.round(shoulderAngleDeviation / angleWeightFactor);\n    let neckScore = Math.round(earAngleDeviation / angleWeightFactor);\n\n    let postureStr = \"\";\n    let backStr = \"\";\n    let headStr = \"\";\n\n    if (postureScore >= 0 && postureScore < 5) {\n      postureStr = \"Poor Posture\";\n    }\n    else if (postureScore >= 5 && postureScore < 8) {\n      postureStr = \"Fair Posture\";\n    }\n    else if (postureScore >= 8 && postureScore <= 10) {\n      postureStr = \"Great Posture\";\n    }\n\n    // Shoulder to hip analysis.\n    if (backScore >= 0 && backScore < 2) {\n      backStr = \"Back Straightness: Your back is straight!\";\n    }\n    else if (backScore >= 2 && backScore < 4) {\n      backStr = \"Back Straightness: Your back is slightly tilted - try aligning it upright\";\n    }\n    else if (backScore >= 4) {\n      backStr = \"Back Straightness: Your back is very curved - try aligning it upright\";\n    }\n\n    // Ear to shoulder analysis.\n    if (neckScore >= 0 && neckScore < 4) {\n      headStr =\"Neck Position: Your neck is positioned well!\";\n    }\n    else if (neckScore >= 4 && neckScore < 8) {\n      headStr =\"Neck Position: Your neck is slightly in front of your body - try aligning it above your shoulders\";\n    }\n    else if (neckScore >= 8) {\n      headStr =\"Neck Position: Your neck is too far in front of your body - try aligning it above your shoulders\";\n    }\n\n    this.setState(prevState => ({\n      ...prevState,\n      score: Math.round(postureScore)+\"/10\",\n      avgPosture: postureStr,\n      backTilt: backStr,\n      headTilt: headStr,\n      })\n    );\n\n  }\n\n  render() {\n    const {\n      displayHomepage,\n      loading,\n      picture,\n      imgWidth,\n      imgHeight,\n      isValidImg,\n      avgPosture,\n      score,\n      headTilt,\n      backTilt\n    } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Navbar bg=\"dark\" variant=\"dark\">\n          <Navbar.Brand href=\"#home\" onClick={this.displayHomepage}>\n            <img\n              alt=\"\"\n              src={logo}\n              width=\"30\"\n              height=\"30\"\n              className=\"d-inline-block align-top\"\n              />{' '}\n              Perfect Posture\n              {' '}\n            </Navbar.Brand>\n            <Nav className=\"mr-auto\">\n            </Nav>\n            <Nav>\n              <Popup\n                className=\"popup-content\"\n                trigger={<button size=\"sm\" align=\"right\">About Us</button>}\n                position=\"bottom right\">\n                <h5> Our Model</h5>\n                <p>We use computer vision to analyze an image of your posture.\n                  Some of the metrics that go into our analysis include\n                  examing your back, neck, and shoulder positionings.\n                  We do not store your images.\n                </p>\n              </Popup>\n            </Nav>\n          </Navbar>\n          <div className=\"body\">\n            <div className=\"upload\">\n              <ImageUploader\n                withIcon={true}\n                singleImage={true}\n                onChange={this.onDrop}\n                imgExtension={[\".jpg\", \".jpeg\", \".png\"]}\n                maxFileSize={5242880}\n              />\n              {displayHomepage ?\n                <div className=\"homepage-info\">\n                  <span>Welcome to Perfect Posture! To get the most accurate analysis, make sure to submit a seated side view picture with as little\n                  obstruction as possible.\n                  </span>\n                  <div className=\"space\"></div>\n                  <p>Follow the example below and show us your natural pose!</p>\n                  <img\n                    alt=\"\"\n                    src={examplePic}\n                    width=\"240\"\n                    height=\"352\"\n                    className=\"d-inline-block align-top\"\n                    />\n                </div>:null\n              }\n              <img src={picture} alt=\"upload\" style={{display: 'none', height: scaledHeight, width: 'auto'}} ref={this.imgref}/>\n              <canvas width={imgWidth} height={imgHeight} ref={this.canvasref} />\n              {loading ?\n                <Loader className=\"loader-pos\"type=\"TailSpin\" color=\"#00BFFF\" height={160} width={160} />\n                : null\n              }\n              {isValidImg ?\n                <div className=\"insights-text\">\n                  <div><b>{ avgPosture }</b></div>\n                  <div><b>{ score }</b></div>\n                  <div>{ headTilt } </div>\n                  <div>{ backTilt } </div>\n                </div>\n                : <div>Cannot estimate your posture from this image, try takin a better side view picture and make sure the view is not obstructed</div>\n              }\n\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default App\n","export default \"data:image/png;base64,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\"","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}